{"version":3,"file":"js/924.509caa0d.js","mappings":"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","sources":["webpack://vue-week6/./node_modules/mitt/dist/mitt.mjs","webpack://vue-week6/./src/libs/emitter.js","webpack://vue-week6/./src/views/Front/ProductsView.vue","webpack://vue-week6/./src/views/Front/ProductsView.vue?c50b"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","//目的: 當購物車品項增加時,結帳按鈕的數量也要更新=>跨元件傳遞\nimport mitt from \"mitt\";\nconst emitter = mitt();\nexport default emitter;\n","<template>\n  <h2 class=\"mb-3 text-center\">This is 產品列表頁面</h2>\n  <table class=\"table align-middle\">\n    <thead>\n      <th class=\"text-center\">圖片</th>\n      <th class=\"text-center\">商品名稱</th>\n      <th class=\"text-center\">價格</th>\n    </thead>\n    <tbody>\n      <tr v-for=\"product in products\" :key=\"product.id + 1\">\n        <td style=\"width: 250px\">\n          <div\n            style=\"\n              height: 150px;\n              backgroud-size: cover;\n              background-position: center center;\n            \"\n            :style=\"{ backgroundImage: `url('${product.imageUrl}')` }\"\n          ></div>\n        </td>\n        <td class=\"text-center\">{{ product.title }}</td>\n        <td class=\"text-center\">{{ product.price }}</td>\n        <td>\n          <div>\n            <router-link\n              :to=\"`/product/${product.id}`\"\n              class=\"btn btn-outline-secondary m-2\"\n              >查看更多</router-link\n            >\n            <button\n              class=\"btn btn-outline-danger\"\n              @click=\"addToCart(product.id)\"\n            >\n              加入購物車\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <router-view></router-view>\n</template>\n<script>\nimport emitter from \"@/libs/emitter\";\n\nexport default {\n  data() {\n    return {\n      products: [],\n      cartData: {},\n      isLoadingItem: \"\",\n    };\n  },\n  methods: {\n    getProducts() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          this.products = res.data.products;\n          //console.log(res.data.products);\n        })\n        .catch((err) => {\n          console.log(err.data.message);\n        });\n    },\n    getCart() {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cartData = res.data.data;\n        });\n    },\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n      this.isLoadingItem = id;\n      //要記得在api 後面帶入 data (api規定的)\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data }\n        )\n        .then((res) => {\n          console.log(res);\n          alert(\"商品已成功加入購物車\");\n          this.getCart();\n          this.isLoadingItem = \"\";\n          emitter.emit(\"get-cart\");\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n","import { render } from \"./ProductsView.vue?vue&type=template&id=6f1804e1\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Amber\\\\舊電腦資料\\\\hex\\\\Vue3\\\\2022春季直播班\\\\WK6\\\\vue-week6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","_createElementVNode","class","style","_hoisted_1","_hoisted_3","_createElementBlock","_Fragment","_renderList","$data","product","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","_createVNode","_component_router_link","to","onClick","$options","_hoisted_8","_component_router_view","data","products","cartData","isLoadingItem","methods","getProducts","this","$http","then","res","catch","err","console","log","message","getCart","addToCart","qty","product_id","post","alert","mounted","__exports__","render"],"sourceRoot":""}