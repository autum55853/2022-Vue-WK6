{"version":3,"file":"js/448.40b60650.js","mappings":"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","sources":["webpack://vue-week6/./node_modules/mitt/dist/mitt.mjs","webpack://vue-week6/./src/libs/emitter.js","webpack://vue-week6/./src/views/Front/CartView.vue","webpack://vue-week6/./src/views/Front/CartView.vue?2af0"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","//目的: 當購物車品項增加時,結帳按鈕的數量也要更新=>跨元件傳遞\nimport mitt from \"mitt\";\nconst emitter = mitt();\nexport default emitter;\n","<template>\n  <h2>This is 購物車頁面</h2>\n  <div>\n    <button type=\"button\" class=\"btn btn-danger\" @click=\"removeAllCartItem()\">\n      清空購物車\n    </button>\n  </div>\n  <table class=\"table align-middle\">\n    <thead>\n      <tr>\n        <th></th>\n        <th>品名</th>\n        <th style=\"width: 150px\">數量</th>\n        <th class=\"text-end\">單價</th>\n        <th class=\"text-end\">各品項總價</th>\n      </tr>\n    </thead>\n    <tbody>\n      <template v-if=\"cartData.carts\">\n        <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n          <td>\n            <button\n              @click=\"removeCartItem(item.id)\"\n              type=\"button\"\n              class=\"btn btn-outline-danger btn-sm\"\n            >\n              x\n            </button>\n          </td>\n          <td>\n            {{ item.product.title }}\n            <!-- <div class=\"text-success\">\n                      已套用優惠券\n                    </div> -->\n          </td>\n          <td>\n            <div class=\"input-group input-group-sm\">\n              <div class=\"input-group mb-3\">\n                <!-- 不給使用者填寫 <input min=\"1\" type=\"number\" class=\"form-control\" v-model=\"item.qty\"> -->\n                <!-- 設置disabled 避免選到原來的數字,重複觸發api -->\n                <select\n                  class=\"form-select\"\n                  v-model=\"item.qty\"\n                  @change=\"updateCart(item)\"\n                  :disabled=\"isLoadingItem === item.id\"\n                  id=\"\"\n                >\n                  <!-- v-for=\"num in 20\" 顯示出1~20的數字 -->\n                  <option\n                    :value=\"num\"\n                    v-for=\"num in 20\"\n                    :key=\"`${num}-${item.id}`\"\n                    :selected=\"item.qty === num\"\n                  >\n                    {{ num }}\n                  </option>\n                </select>\n              </div>\n            </div>\n          </td>\n          <td class=\"text-end\">\n            ${{ item.product.price }} / {{ item.product.unit }}\n          </td>\n          <td class=\"text-end\">${{ item.final_total }}</td>\n        </tr>\n      </template>\n    </tbody>\n    <tfoot>\n      <tr>\n        <td colspan=\"3\" class=\"text-end\">總計 Total Amount</td>\n        <td class=\"text-end\">$ {{ cartData.final_total }}</td>\n      </tr>\n    </tfoot>\n  </table>\n</template>\n\n<script>\nimport emitter from \"@/libs/emitter\";\nexport default {\n  data() {\n    return {\n      cartData: {},\n      products: [],\n      isLoadingItem: \"\",\n    };\n  },\n  methods: {\n    /* getProducts() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          this.products = res.data.products;\n          console.log(res.data.products);\n        })\n        .catch((err) => {\n          console.log(err.data.message);\n        });\n    }, */\n    getCart() {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cartData = res.data.data;\n        });\n    },\n    removeCartItem(id) {\n      this.isLoadingItem = id;\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\n        )\n        .then(() => {\n          //console.log(res);\n          alert(\"商品已從購物車刪除\");\n          this.getCart();\n          emitter.emit(\"get-cart\");\n          this.isLoadingItem = \"\";\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    removeAllCartItem() {\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`\n        )\n        .then(() => {\n          //console.log(res);\n          alert(\"已清空購物車\");\n          this.getCart();\n        });\n    },\n    updateCart(item) {\n      const data = {\n        product_id: item.id,\n        qty: item.qty,\n      };\n      this.isLoadingItem = item.id;\n      //要記得在api 後面帶入 data (api規定的)\n      this.$http\n        .put(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`,\n          { data }\n        )\n        .then((res) => {\n          console.log(res);\n          emitter.emit(\"get-cart\");\n          //alert('商品數量已更新');\n          this.getCart();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n  mounted() {\n    /*  this.getProducts(); */\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=33dc427e\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Amber\\\\舊電腦資料\\\\hex\\\\Vue3\\\\2022春季直播班\\\\WK6\\\\vue-week6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","_createElementVNode","class","style","colspan","_hoisted_1","type","onClick","$options","_hoisted_3","$data","carts","_createElementBlock","_Fragment","key","_renderList","item","id","_hoisted_4","_toDisplayString","product","title","qty","$event","onChange","disabled","num","value","selected","_hoisted_8","price","unit","final_total","_hoisted_11","data","cartData","products","isLoadingItem","methods","getCart","this","$http","then","res","removeCartItem","delete","alert","catch","err","console","log","removeAllCartItem","updateCart","product_id","put","mounted","__exports__","render"],"sourceRoot":""}