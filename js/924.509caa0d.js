"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[924],{530:function(t,e,n){function a(t){return{all:t=t||new Map,on:function(e,n){var a=t.get(e);a?a.push(n):t.set(e,[n])},off:function(e,n){var a=t.get(e);a&&(n?a.splice(a.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var a=t.get(e);a&&a.slice().map((function(t){t(n)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,n)}))}}}n.d(e,{Z:function(){return c}});const s=a();var c=s},924:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var a=n(252),s=n(577);const c=(0,a._)("h2",{class:"mb-3 text-center"},"This is 產品列表頁面",-1),o={class:"table align-middle"},i=(0,a._)("thead",null,[(0,a._)("th",{class:"text-center"},"圖片"),(0,a._)("th",{class:"text-center"},"商品名稱"),(0,a._)("th",{class:"text-center"},"價格")],-1),r={style:{width:"250px"}},l={class:"text-center"},u={class:"text-center"},d=(0,a.Uk)("查看更多"),h=["onClick"];function p(t,e,n,p,g,m){const v=(0,a.up)("router-link"),f=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[c,(0,a._)("table",o,[i,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.products,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id+1},[(0,a._)("td",r,[(0,a._)("div",{style:(0,s.j5)([{height:"150px","backgroud-size":"cover","background-position":"center center"},{backgroundImage:`url('${t.imageUrl}')`}])},null,4)]),(0,a._)("td",l,(0,s.zw)(t.title),1),(0,a._)("td",u,(0,s.zw)(t.price),1),(0,a._)("td",null,[(0,a._)("div",null,[(0,a.Wm)(v,{to:`/product/${t.id}`,class:"btn btn-outline-secondary m-2"},{default:(0,a.w5)((()=>[d])),_:2},1032,["to"]),(0,a._)("button",{class:"btn btn-outline-danger",onClick:e=>m.addToCart(t.id)}," 加入購物車 ",8,h)])])])))),128))])]),(0,a.Wm)(f)],64)}var g=n(530),m={data(){return{products:[],cartData:{},isLoadingItem:""}},methods:{getProducts(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/amberlin/products/all").then((t=>{this.products=t.data.products})).catch((t=>{console.log(t.data.message)}))},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/amberlin/cart").then((t=>{this.cartData=t.data.data}))},addToCart(t,e=1){const n={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/amberlin/cart",{data:n}).then((t=>{console.log(t),alert("商品已成功加入購物車"),this.getCart(),this.isLoadingItem="",g.Z.emit("get-cart")})).catch((t=>{console.log(t)}))}},mounted(){this.getProducts()}},v=n(744);const f=(0,v.Z)(m,[["render",p]]);var _=f}}]);
//# sourceMappingURL=924.509caa0d.js.map